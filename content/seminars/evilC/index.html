<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Evil C++ 2</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: 0_introduction.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Evil C++ 2</h1></header>
            
            
            <section><h2>Obfuscation Boogaloo</h2>
<h3>C and C++ Standard tricks to bemuse and befuddle</h3>
<ul>
<li>Presented and created by Matt Soucy</li>
<li>Ranked from least to most evil, in the author's opinion</li>
<li>Now with 200% more evil</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="0_introduction.md">0_introduction.md</a>
            </aside>
            
            <aside class="page_number">
              1/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 0_introduction.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Prerequisites</h1></header>
            
            
            <section><p>Some of these tricks may require knowledge of the following:</p>
<ul>
<li>Basic C syntax<ul>
<li>Variable initialization and creation</li>
<li>Loops and control flow</li>
<li>Logical operators</li>
<li>Statements vs. Expressions</li>
</ul>
</li>
<li>Familiarity with pointers and references</li>
<li>Basic bit manipulation (the &amp;, |, ^, ~ operators)</li>
<li>Base-8 and Base-16</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="0_introduction.md">0_introduction.md</a>
            </aside>
            
            <aside class="page_number">
              2/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 0_introduction.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Warnings</h1></header>
            
            
            <section><p>The tricks involved in this presentation may exploit definitions found in the standard,
or they may merely be things that aren't commonly known.
Either way, in 99.9999% of the cases where you wonder if you need to use them, you definitely don't.</p>
<blockquote>
<p>The people who actually need them know with certainty that they need them, and don't need an explaination about why</p>
<blockquote>
<p>Python Guru Tim Peters</p>
</blockquote>
</blockquote>
<p>This presentation is designed to show the effects of:</p>
<ul>
<li>Different language features interacting</li>
<li>The programmer having complete control over how an individual segment of memory is used</li>
<li>Manipulating the build system (such as the preprocessor)</li>
</ul>
<p>It is NOT meant to demonstrate things that should be used for anything more than messing around and learning.
If you use these in production code, you will be <strong><em>REDACTED</em></strong>.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="0_introduction.md">0_introduction.md</a>
            </aside>
            
            <aside class="page_number">
              3/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1_harmless.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Harmless</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1_harmless.md">1_harmless.md</a>
            </aside>
            
            <aside class="page_number">
              4/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1_harmless.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>String Concatenation</h1></header>
            
            
            <section><p>Two string literals, placed "next to" each other, will be treated as one:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">printf</span><span class="p">(</span><span class="s">&quot;abc&quot;</span> <span class="s">&quot;def&quot;</span><span class="p">);</span> <span class="c1">// same as printf(&quot;abcdef&quot;)</span>
</pre></div>
</td></tr></table>
<p>This is useful for long strings (such as insanely complex printf formatting strings) that you can extend onto more than one line</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1_harmless.md">1_harmless.md</a>
            </aside>
            
            <aside class="page_number">
              5/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1_harmless.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Octal</h1></header>
            
            
            <section><p>There is a HUGE difference between the following:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// decimal 10</span>
<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mo">010</span><span class="p">;</span> <span class="c1">// decimal 8</span>
<span class="kt">int</span> <span class="n">z</span> <span class="o">=</span> <span class="mh">0x10</span><span class="p">;</span> <span class="c1">// decimal 16</span>
</pre></div>
</td></tr></table>
<p>There are very few uses for this syntax, but it's important to know about it to avoid issues.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1_harmless.md">1_harmless.md</a>
            </aside>
            
            <aside class="page_number">
              6/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1_harmless.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Void pointers</h1></header>
            
            
            <section><p>Can be used as any pointer type, and point to any data type
In order to use it as anything other than just a pointer, it must be cast</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="n">printPtr</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">*</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">p</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%p&quot;</span><span class="p">,</span><span class="n">p</span><span class="p">);</span> <span class="c1">// Pointer printf</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;A&#39;</span><span class="p">;</span>
    <span class="kt">char</span><span class="o">*</span> <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">;</span>
    <span class="n">printPtr</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p>Many C library functions use void* to accept pointers because they implicitly cast to any other pointer type.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1_harmless.md">1_harmless.md</a>
            </aside>
            
            <aside class="page_number">
              7/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1_harmless.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Commenting out/testing values</h1></header>
            
            
            <section><p>If you need to change a value really quick to test something:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span>
    <span class="c1">//Actual_value</span>
    <span class="n">Testing_value</span>
    <span class="p">;</span>
</pre></div>
</td></tr></table>
<p>Debug versions of code can use different values:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span>
<span class="cp">#if DEBUG</span>
    <span class="n">DEBUG_VALUE</span>
<span class="cp">#else</span>
    <span class="n">ACTUAL_VALUE</span>
<span class="cp">#endif</span>
    <span class="p">;</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1_harmless.md">1_harmless.md</a>
            </aside>
            
            <aside class="page_number">
              8/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2_tricky.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Tricky</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2_tricky.md">2_tricky.md</a>
            </aside>
            
            <aside class="page_number">
              9/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2_tricky.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>sizeof</h1></header>
            
            
            <section><p>Most people have heard of the sizeof command, however, they are unaware that sizeof doesn't actually evaluate its contents.</p>
<p>The entire thing is performed at compile time, but not executed - it returns the size of the result of the expression, and compiles that in.</p>
<p>The original code doesn't actually make it to the executable.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Notice the lack of a body there</span>
<span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="p">,</span> <span class="kt">int</span> <span class="n">N</span><span class="o">&gt;</span> <span class="kt">char</span> <span class="p">(</span> <span class="o">&amp;</span><span class="n">Array</span><span class="p">(</span> <span class="n">T</span><span class="p">(</span><span class="o">&amp;</span><span class="p">)[</span><span class="n">N</span><span class="p">]</span> <span class="p">)</span> <span class="p">)[</span><span class="n">N</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Length of an array: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Array</span><span class="p">(</span><span class="n">x</span><span class="p">)));</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2_tricky.md">2_tricky.md</a>
            </aside>
            
            <aside class="page_number">
              10/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2_tricky.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>The comma operator</h1></header>
            
            
            <section><p>Commas are useful for more than just separating function arguments:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="mi">5</span><span class="p">;}</span>
<span class="kt">int</span> <span class="n">bar</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="mi">6</span><span class="p">;}</span>
<span class="kt">int</span> <span class="n">baz</span><span class="p">()</span> <span class="p">{</span><span class="k">return</span> <span class="mi">7</span><span class="p">;}</span>

<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">foo</span><span class="p">(),</span><span class="n">bar</span><span class="p">(),</span><span class="n">baz</span><span class="p">());</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// Outputs 7</span>
</pre></div>
</td></tr></table>
<p>You may be familiar with the comma in for loops and variable declarations:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">j</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">j</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*do stuff*/</span><span class="p">}</span>
</pre></div>
</td></tr></table>
<p>Now try sticking them in, say, an if statement:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="k">if</span><span class="p">(</span><span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">*=</span><span class="mi">2</span><span class="p">,</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/*do stuff*/</span><span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2_tricky.md">2_tricky.md</a>
            </aside>
            
            <aside class="page_number">
              11/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2_tricky.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Conditional Scope</h1></header>
            
            
            <section><p>Conditionals require <em>expressions</em>.
The difference between expressions and statements is that expressions have a value.
Variable declarations are expressions, not statements.</p>
<p>This means that this is possible, limiting the scope of the variable to the body of the if statement and its else clause(s)</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">someFunction</span><span class="p">())</span> <span class="p">{</span>
    <span class="c1">// Use ret</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// ret is 0</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2_tricky.md">2_tricky.md</a>
            </aside>
            
            <aside class="page_number">
              12/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2_tricky.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Bitfields</h1></header>
            
            
            <section><p>It's possible to compact a group of variables into the size of a single variable.
This is called bitfields.
Care must be taken to arrange bitfields to end on a WORD boundry.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">struct</span> <span class="n">Bitfield</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="nl">x:</span><span class="mi">2</span><span class="p">;</span> <span class="c1">// 2 bits</span>
    <span class="kt">unsigned</span> <span class="nl">y:</span><span class="mi">16</span><span class="p">;</span> <span class="c1">// 16 bits</span>
    <span class="kt">unsigned</span> <span class="nl">z:</span><span class="mi">14</span><span class="p">;</span> <span class="c1">// 14 bits</span>
<span class="p">};</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2_tricky.md">2_tricky.md</a>
            </aside>
            
            <aside class="page_number">
              13/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Devious</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              14/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Array and pointer indexing</h1></header>
            
            
            <section><p>Given:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">arr</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
</pre></div>
</td></tr></table>
<p>We know that:</p>
<ul>
<li>arr is a specific type: an array</li>
<li>&amp;arr is a pointer to an array</li>
<li>&amp;arr[0] is the location of/a pointer to the first element of the array</li>
</ul>
<p>Therefore, each of these is equivalent:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">arr</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="o">*</span><span class="p">(</span><span class="n">arr</span><span class="o">+</span><span class="mi">5</span><span class="p">)</span>
<span class="mi">5</span><span class="p">[</span><span class="n">arr</span><span class="p">]</span>
</pre></div>
</td></tr></table>
<h4>This is assuming, of course, that arr is a pointer/array, and not a class with operator[] overloaded</h4></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              15/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>By extension</h1></header>
            
            
            <section><p>String literals have a type of const char*.</p>
<p>It's perfectly legal to index a const char*.</p>
<p>Because of this, you're allowed to do something like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// Gets the lowest hex value of a variable</span>
<span class="s">&quot;0123456789abcdef&quot;</span><span class="p">[</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">];</span>
<span class="c1">// Indexes into the string, but does the same thing</span>
<span class="p">(</span><span class="n">x</span> <span class="o">&amp;</span> <span class="mh">0xf</span><span class="p">)[</span><span class="s">&quot;0123456789abcdef&quot;</span><span class="p">];</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              16/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>The ternary operator</h1></header>
            
            
            <section><p>The ternary operator, using the format <code>(x?y:z)</code>, becomes <code>y</code> if <code>x</code> is true, otherwise <code>z</code></p>
<p>Here's a simple example:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span><span class="o">?</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Fail&quot;</span><span class="p">)</span><span class="o">:</span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Expected&quot;</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p>However, it actually much more diabolical uses:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">;</span>
<span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">y</span><span class="p">;</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">)</span><span class="o">?</span><span class="nl">x:</span><span class="n">y</span><span class="p">;</span> <span class="c1">// Sets z to the higher of x and y</span>
</pre></div>
</td></tr></table>
<p>Or, if you want to get REALLY crazy:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="n">cin</span><span class="o">&gt;&gt;</span><span class="n">x</span><span class="o">&gt;&gt;</span><span class="n">y</span><span class="p">;</span>
<span class="c1">// Sets the lower of x and y to the inverse of the other</span>
<span class="p">((</span><span class="n">x</span><span class="o">&lt;</span><span class="n">y</span><span class="p">)</span><span class="o">?</span><span class="nl">x:</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="p">((</span><span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">)</span><span class="o">?</span><span class="nl">x:</span><span class="n">y</span><span class="p">);</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              17/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Abusing destructors</h1></header>
            
            
            <section><p>Destructors are called when a class (or struct) leaves scope.</p>
<p>This includes when the program is cleaning up after itself when it's exiting main.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;iostream&gt;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">ProgramWrapper</span> <span class="p">{</span>
    <span class="o">~</span><span class="n">ProgramWrapper</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cin</span><span class="p">.</span><span class="n">sync</span><span class="p">();</span><span class="n">cin</span><span class="p">.</span><span class="n">ignore</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="n">wrapper</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              18/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Function Pointers</h1></header>
            
            
            <section><p>Since you can create a pointer to a variable, it makes sense that you can create a pointer to a function.
The syntax is rather ugly though...</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="n">f</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">g</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">h</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">-</span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">typedef</span> <span class="kt">int</span><span class="p">(</span><span class="o">*</span><span class="n">FunctionPointer</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span> <span class="c1">// Create a type FunctionPointer</span>
<span class="c1">// This type points to a function taking an int and returning an int</span>
<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">FunctionPointer</span> <span class="n">todo</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">f</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">h</span><span class="p">};</span> <span class="c1">// Array of function pointers</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">unsigned</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">todo</span><span class="p">[</span><span class="n">i</span><span class="p">](</span><span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// Result should be 19</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Result&gt;</span><span class="se">\t</span><span class="s">%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">x</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              19/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Unions</h1></header>
            
            
            <section><p>Unions are a C++ construct that seem to be horribly misused.
Their purpose is to <em>save memory</em>, by placing several variable types in the same block of memory.
The behavior of writing to one type and reading from another is undefined.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">union</span> <span class="n">Number</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">integer</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">decimal</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</td></tr></table>
<p>This undefined behavior is often abused for type punning, or the rough equivalent of:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">*</span><span class="p">(</span><span class="kt">float</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">integer</span><span class="p">;</span>
</pre></div>
</td></tr></table>
<p>Don't use unions for this, though.
Undefined behavior is so named for a reason, you have no guarantee that it'll work.</p>
<p>Unions can also contain constructors and member functions -
basically, anything a struct can contain that doesn't involve inheritance or virtual functions.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              20/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3_devious.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Const References</h1></header>
            
            
            <section><p>Everyone knows that you can't make a reference to the return value of a function.
That's because the return value is a temporary, and once it leaves the function's scope the temporary is invalid.</p>
<p>Unless it's <code>const</code>.</p>
<p>When you create a <code>const</code> reference to a temporary variable,
it extends the lifetime of the temporary to the lifetime of the reference.
What this means is, this is completely valid:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">const</span> <span class="kt">int</span> <span class="o">&amp;</span> <span class="n">cir</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// OK to use cir = 2 after this line</span>
</pre></div>
</td></tr></table>
<p>Andrei Alexandrescu used this to create a "Scope Guard", to allow cleanup inside scope blocks.
He even described it as "the most important <strong>const</strong> I ever wrote."</p>
<p>The most useful trick is that it directly calls the class's destructor.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">Derived</span> <span class="n">factory</span><span class="p">();</span> <span class="c1">// construct a Derived object</span>

<span class="kt">void</span> <span class="n">g</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">const</span> <span class="n">Base</span><span class="o">&amp;</span> <span class="n">b</span> <span class="o">=</span> <span class="n">factory</span><span class="p">();</span> <span class="c1">// calls Derived::Derived here</span>
  <span class="c1">// … use b …</span>
<span class="p">}</span> <span class="c1">// calls Derived::~Derived directly here — not Base::~Base + virtual dispatch!</span>
</pre></div>
</td></tr></table>
<p class="notes">Example taken from <a href="http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/">Herb Stutter's Guru of the Week (88)</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3_devious.md">3_devious.md</a>
            </aside>
            
            <aside class="page_number">
              21/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Evil</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              22/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Trigraphs</h1></header>
            
            
            <section><p>In order to support those poor programmers who don't have access to such exotic keys as {}, C/C++ support the following:</p>
<table>
<thead>
<tr>
<th align="center">Trigraph</th>
<th align="center">Equivalent</th>
<th align="center">Trigraph</th>
<th align="center">Equivalent</th>
<th align="center">Trigraph</th>
<th align="center">Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">??=</td>
<td align="center">#</td>
<td align="center">??/</td>
<td align="center">\</td>
<td align="center">??'</td>
<td align="center">^</td>
</tr>
<tr>
<td align="center">??(</td>
<td align="center">[</td>
<td align="center">??)</td>
<td align="center">]</td>
<td align="center">??!</td>
<td align="center">&#124;</td>
</tr>
<tr>
<td align="center">??&lt;</td>
<td align="center">{</td>
<td align="center">??&gt;</td>
<td align="center">}</td>
<td align="center">??-</td>
<td align="center">~</td>
</tr>
</tbody>
</table>
<p>Important:</p>
<ul>
<li>These require the -trigraphs flag in GCC.</li>
<li><code>???</code> is not a valid trigraph</li>
<li>Replacements are made as the FIRST step of the preprocessor</li>
<li>Trigraphs within strings are replaced - to prevent this, do "?""?-" instead of "??-"</li>
<li>With the advent of raw strings (C++11), in order to safely remove all trigraphs you essentially need to write a complete C++ parser.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              23/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Digraphs</h1></header>
            
            
            <section><p>There are also digraphs, meant to be more readable:</p>
<table>
<thead>
<tr>
<th>Digraph</th>
<th>Equivalent</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;:</td>
<td>[</td>
</tr>
<tr>
<td>&gt;:</td>
<td>]</td>
</tr>
<tr>
<td>&lt;%</td>
<td>{</td>
</tr>
<tr>
<td>%&gt;</td>
<td>}</td>
</tr>
<tr>
<td>%:</td>
<td>#</td>
</tr>
</tbody>
</table>
<p>Differences between trigraphs and digraphs:</p>
<ul>
<li>Digraphs within strings will NOT be replaced</li>
<li>-trigraphs isn't required for these</li>
<li>Checked during tokenization in the preprocessor</li>
<li>A digraph must represent a full token by itself, except for %:%:, which replaces the preprocessor ##</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              24/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>X-Macros</h1></header>
            
            
            <section><p>The preprocessor uses a textual replace for #include, replacing the #include with the (preprocessed) body of the file.</p>
<p>Someone unfamiliar with the preprocessor may be confused by this,
because it's common for beginners to assume that the preprocessor must produce complete tokens.
However, </p>
<p>This means that the preprocesser can be used to generate some types of code.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              25/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>X-macros Example</h1></header>
            
            
            <section><h3>colors.def</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">X</span><span class="p">(</span><span class="n">red</span><span class="p">)</span>
<span class="n">X</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
<span class="n">X</span><span class="p">(</span><span class="n">blue</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<h3>main.cpp</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="cp">#define X(a) a,</span>
<span class="k">enum</span> <span class="n">COLOR</span> <span class="p">{</span>
  <span class="cp">#include &quot;colors.def&quot;</span>
<span class="p">};</span>
<span class="cp">#undef X</span>

<span class="cp">#define X(a) #a,</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">color_name</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="cp">#include &quot;colors.def&quot;</span>
<span class="p">};</span>
<span class="cp">#undef X</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">enum</span> <span class="n">COLOR</span> <span class="n">c</span> <span class="o">=</span> <span class="n">red</span><span class="p">;</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;c=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">color_name</span><span class="p">[</span><span class="n">c</span><span class="p">]);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              26/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>X-Macros final result</h1></header>
            
            
            <section><h3>The end result:</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">enum</span> <span class="n">COLOR</span> <span class="p">{</span>
  <span class="n">red</span><span class="p">,</span>
  <span class="n">green</span><span class="p">,</span>
  <span class="n">blue</span>
<span class="p">};</span>

<span class="kt">char</span> <span class="o">*</span><span class="n">color_name</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">&quot;red&quot;</span><span class="p">,</span>
  <span class="s">&quot;green&quot;</span><span class="p">,</span>
  <span class="s">&quot;blue&quot;</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">enum</span> <span class="n">COLOR</span> <span class="n">c</span> <span class="o">=</span> <span class="n">red</span><span class="p">;</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;c=%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">color_name</span><span class="p">[</span><span class="n">c</span><span class="p">]);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p class="notes">Example blatantly stolen from <a href="http://www.drdobbs.com/the-new-c-x-macros/184401387">Randy Meyers</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              27/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Supermacros</h1></header>
            
            
            <section><p>By using <code>#undef</code> within the X-macro file, any code that uses it won't have to clean up after itself.</p>
<p>You can use #define and X-macros together to simulate passing a parameter to the included header file.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              28/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Unary + operator</h1></header>
            
            
            <section><p>Everyone knows that the + operator is used to sum two values.
However, it can also be used as a unary operator.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">+</span><span class="mi">1234</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="o">+</span><span class="n">x</span><span class="p">);</span>
</pre></div>
</td></tr></table>
<p>Alone, it's somewhat useless, but it has some interesting side effects.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              29/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Unary + on enums</h1></header>
            
            
            <section><p>When used on an enum, unary + is the same as a cast to int.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">enum</span> <span class="n">X</span> <span class="p">{</span>
    <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span>
<span class="p">};</span>

<span class="n">X</span> <span class="n">val</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="o">+</span><span class="n">val</span><span class="p">);</span> <span class="c1">// +val is an int</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              30/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Unary + to create const ref</h1></header>
            
            
            <section><p>Sometimes, a function requires a const reference, but you want to pass it something else.
When this happens, you can use + to create a "temporary reference" to a value.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
  <span class="k">static</span> <span class="kt">int</span> <span class="k">const</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// This does something interesting...</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// fails to link - tries to get the address of &quot;Foo::value&quot;!</span>
  <span class="n">f</span><span class="p">(</span><span class="n">Foo</span><span class="o">::</span><span class="n">value</span><span class="p">);</span>

  <span class="c1">// works - pass a temporary value</span>
  <span class="n">f</span><span class="p">(</span><span class="o">+</span><span class="n">Foo</span><span class="o">::</span><span class="n">value</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p class="notes">Taken from <a href="http://stackoverflow.com/questions/75538/hidden-features-of-c">Johannes Schaub</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              31/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Unary + to convert arrays to pointers</h1></header>
            
            
            <section><p>On occasion, you'll need to send a pointer to a function. Typically, your options are:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="o">&amp;</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</pre></div>
</td></tr></table>
<p>However, using unary + you can convert any array into a pointer while remaining easy-to-read.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// This does something interesting...</span>
<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">f</span><span class="p">(</span><span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">,</span> <span class="n">T</span> <span class="k">const</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">);</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span> <span class="c1">// won&#39;t work! different values for &quot;T&quot;!</span>
  <span class="n">f</span><span class="p">(</span><span class="o">+</span><span class="n">a</span><span class="p">,</span> <span class="o">+</span><span class="n">b</span><span class="p">);</span> <span class="c1">// works! T is &quot;int*&quot; both times</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p class="notes">Taken from <a href="http://stackoverflow.com/questions/75538/hidden-features-of-c">Johannes Schaub</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              32/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Switch Statements</h1></header>
            
            
            <section><p>How do switch statements work?</p>
<p>An ordinary switch statement might look something like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">switch</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Case 0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Case 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Case 2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">default</span><span class="o">:</span>
    <span class="c1">// do nothing</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              33/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Switch Statements (Fallthrough)</h1></header>
            
            
            <section><p>Regular switch statements, by default, have a unique scope for the whole switch (as shown by the {}).</p>
<p>However, if you want to pass through to the next case, this poses problems and will error:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">switch</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;int: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="kt">char</span> <span class="n">y</span> <span class="o">=</span> <span class="sc">&#39;A&#39;</span><span class="p">;</span> <span class="c1">// Error: y is already an int</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;char: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">1.66</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;float: %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="k">default</span><span class="o">:</span>
    <span class="c1">// do nothing</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              34/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Switch Statements (Blocks)</h1></header>
            
            
            <section><p>This can be used to properly handle scope for each case, as well as group statements together logically:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">switch</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">0</span><span class="o">:</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;int: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">y</span> <span class="o">=</span> <span class="sc">&#39;A&#39;</span><span class="p">;</span> <span class="c1">// Error: y is already an int</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;char: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">case</span> <span class="mi">2</span><span class="o">:</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">1.66</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;float: %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">default</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// do nothing</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              35/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Switch Interlacing</h1></header>
            
            
            <section><p>We're able to combine switch and if in some convoluted ways:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">switch</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="mi">0</span><span class="o">:</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;int: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span> <span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">case</span> <span class="mi">1</span><span class="o">:</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">y</span> <span class="o">=</span> <span class="sc">&#39;A&#39;</span><span class="p">;</span> <span class="c1">// Error: y is already an int</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;char: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span> <span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">case</span> <span class="mi">2</span><span class="o">:</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="sc">&#39;A&#39;</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;float: %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">case</span> <span class="mi">3</span><span class="o">:</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Gets run iff x is 0, 1, 2, or 3</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">if</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="k">default</span><span class="o">:</span> <span class="p">{</span>
    <span class="c1">// do nothing</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Not a valid choice!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              36/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Switch Interlacing Example</h1></header>
            
            
            <section><p>This trick can be extended to work with if(){}else{}:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">switch</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
<span class="k">case</span> <span class="nl">PARSE_MODE_COMMAND:</span>
    <span class="c1">// We have a null command!</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Illegal null command</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="k">break</span><span class="p">;</span>
<span class="k">case</span> <span class="nl">PARSE_MODE_PIPE:</span>
<span class="k">case</span> <span class="nl">PARSE_MODE_ARGUMENT:</span>
    <span class="k">if</span><span class="p">(</span><span class="n">allowLT</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Set the mode</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">PARSE_MODE_INREDIR</span><span class="p">;</span>
        <span class="n">allowLT</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="k">default</span><span class="o">:</span>
        <span class="c1">// It&#39;s a illegal redirect</span>
        <span class="k">if</span><span class="p">(</span><span class="n">currentArg</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">argCount</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: Illegal input redirect</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
                <span class="n">argList</span><span class="p">[</span><span class="n">currentArg</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Illegal input redirect</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">break</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p class="notes">Credit to Ben Russel <benrr101> for this snippet</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              37/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Duff's Device</h1></header>
            
            
            <section><p>This trick was used with a for loop for this lovely, famous (but slightly modified) bit of code:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">void</span> <span class="n">duff</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">to</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">from</span><span class="p">,</span> <span class="kt">short</span> <span class="n">count</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="n">count</span> <span class="o">+</span> <span class="mi">7</span><span class="p">)</span> <span class="o">/</span> <span class="mi">8</span><span class="p">;</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">count</span> <span class="o">%</span> <span class="mi">8</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>     <span class="k">do</span> <span class="p">{</span>     <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
    <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>              <span class="o">*</span><span class="n">to</span><span class="o">++</span> <span class="o">=</span> <span class="o">*</span><span class="n">from</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span> <span class="k">while</span><span class="p">(</span><span class="o">--</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p>What does this code do?</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              38/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4_evil.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Loop classes</h1></header>
            
            
            <section><p>Everyone knows how to create a variable inside of a for loop:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;...;...)</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p>Because of how structures are declared, it's also possible to create one in the same place.<br />
This can be used to create several variables with different types,
which is otherwise impossible while keeping their scope limited to the for loop.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span><span class="p">(</span><span class="k">struct</span> <span class="p">{</span> <span class="kt">int</span> <span class="n">a</span><span class="p">;</span> <span class="kt">float</span> <span class="n">b</span><span class="p">;</span> <span class="p">}</span> <span class="n">loop</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span> <span class="p">};</span> <span class="p">...;</span> <span class="p">...)</span> <span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4_evil.md">4_evil.md</a>
            </aside>
            
            <aside class="page_number">
              39/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>C++ Evil</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              40/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>C++11 Warning</h1></header>
            
            
            <section><p>All examples marked with C++11 are part of the C++11 standard ONLY.</p>
<p>This requires the compiler to support at least those features of the standard.</p>
<p>For gcc, the switch to enable this is:</p>
<pre><code>gcc -std=c++11 file.cpp
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              41/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Templates</h1></header>
            
            
            <section><p>Templates are a way to write code that can be adapted to work on any type, such as containers.
std::vector is a template, so <code>vector&lt;T&gt;</code> means roughly <code>vector of some type T</code>
The syntax for declaring a template is:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span> <span class="k">struct</span> <span class="n">MyType</span> <span class="p">{</span>
    <span class="n">T</span> <span class="n">data</span><span class="p">;</span>
    <span class="n">MyType</span><span class="p">(</span><span class="n">T</span> <span class="n">data</span><span class="p">)</span><span class="o">:</span><span class="n">data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
</pre></div>
</td></tr></table>
<p>In this case, <code>T</code> is used as a type determined at compile time:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">MyType</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">MyType</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// &quot;typename T&quot; matches &quot;int&quot;</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              42/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Template turing-completeness</h1></header>
            
            
            <section><p>C++ templates are turing-complete:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;cstdio&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span> <span class="n">N</span><span class="o">&gt;</span> <span class="kt">void</span> <span class="n">bin</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">bin</span><span class="o">&lt;</span><span class="p">(</span><span class="n">N</span><span class="o">&gt;&gt;</span><span class="mi">1</span><span class="p">)</span><span class="o">&gt;</span><span class="p">();</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span><span class="n">N</span><span class="o">%</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">template</span><span class="o">&lt;&gt;</span> <span class="kt">void</span> <span class="n">bin</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{}</span> <span class="c1">// Base case</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">bin</span><span class="o">&lt;</span><span class="mi">42</span><span class="o">&gt;</span><span class="p">();</span> <span class="c1">// Print the binary representation of 42</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              43/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Templates on unions (C++11)</h1></header>
            
            
            <section><p>Templates can be done on the types in a union as well:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">From</span><span class="p">,</span> <span class="k">typename</span> <span class="n">To</span><span class="o">&gt;</span>
<span class="k">union</span> <span class="n">union_cast</span> <span class="p">{</span>
    <span class="n">From</span> <span class="n">from</span><span class="p">;</span>
    <span class="n">To</span>   <span class="n">to</span><span class="p">;</span>

    <span class="n">union_cast</span><span class="p">(</span><span class="n">From</span> <span class="n">from</span><span class="p">)</span>
        <span class="o">:</span><span class="n">from</span><span class="p">(</span><span class="n">from</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

    <span class="n">To</span> <span class="n">getTo</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">to</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</td></tr></table>
<p class="notes">Type punning didn't stop being undefined, by the way.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              44/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Templates on bitfields</h1></header>
            
            
            <section><p>Templates can be used for integral values, not just types.
They must be calculatable in compile-time.
This means that a template value can be used in the place of any other compile-time value.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;cstdio&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span> <span class="n">N</span><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">BitField</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="nl">x:</span><span class="n">N</span><span class="p">;</span> <span class="c1">// Generate a compiler error if N==0</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Bitfield</span><span class="o">&lt;</span><span class="mi">2</span><span class="o">&gt;</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// Booleans &quot;graduate&quot; to integers, so this is legal</span>
    <span class="c1">//Bitfield&lt;(1&gt;2)&gt; y; // Creates a zero-width bitfield, so illegal</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              45/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Lambdas (C++11)</h1></header>
            
            
            <section><p>Lambda functions are basically anonymous functions.
These can make some of the standard library's functions much more usable.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// Vector with 10 values</span>
<span class="n">generate</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">x</span><span class="p">.</span><span class="n">end</span><span class="p">(),[]()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">rand</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span><span class="p">);</span> <span class="c1">// Make a &quot;random&quot; value</span>
<span class="p">});</span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;Number of odd values: &quot;</span><span class="p">,</span><span class="n">count_if</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">x</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">i</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="p">;}));</span>
</pre></div>
</td></tr></table>
<p>However they can VERY easily confuse anyone who is unaware:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Harmless example</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,[]{</span><span class="k">return</span> <span class="mi">2</span><span class="o">+</span><span class="mi">2</span><span class="p">;}());</span>
    <span class="p">[](){}();</span> <span class="c1">// Does absolutely nothing but scare future readers</span>
    <span class="c1">// And you can capture them with function pointers!</span>
    <span class="kt">int</span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)(</span><span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">2</span><span class="p">;};</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">f</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              46/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Range-based For Loops (C++11)</h1></header>
            
            
            <section><p>C++11 allows the use of foreach loops using a somewhat familiar syntax:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">vec</span> <span class="o">=</span> <span class="p">...;</span> <span class="c1">// Some values or whatever</span>
<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">vec</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
<p>The trick is that this can operate on C-style arrays, initializer lists, and types that have .begin() and .end() functions.</p>
<p>It's identical to writing:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">for</span><span class="p">(</span><span class="k">auto</span> <span class="n">_iter</span> <span class="o">=</span> <span class="n">vec</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">_iter</span> <span class="o">!=</span> <span class="n">vec</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="n">_iter</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="o">*</span><span class="n">_iter</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              47/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5_cpp.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Exploiting ranges</h1></header>
            
            
            <section><p>This can be exploited to use foreach over things that aren't "real" collections.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Count</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="n">step</span><span class="p">;</span>
<span class="k">public</span><span class="o">:</span>
    <span class="k">class</span> <span class="nc">iterator</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="n">step</span><span class="p">;</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">iterator</span><span class="p">(</span><span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="kt">int</span> <span class="n">step</span><span class="p">)</span> <span class="o">:</span> <span class="n">val</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span> <span class="p">{}</span>
        <span class="n">iterator</span> <span class="k">operator</span><span class="o">++</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">val</span><span class="o">+=</span><span class="n">step</span><span class="p">;</span>
            <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kt">bool</span> <span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span> <span class="n">iterator</span><span class="o">&amp;</span> <span class="n">other</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">val</span><span class="o">+</span><span class="n">step</span> <span class="o">&gt;</span> <span class="n">other</span><span class="p">.</span><span class="n">val</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kt">int</span> <span class="k">operator</span><span class="o">*</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">val</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">};</span>
    <span class="n">Count</span><span class="p">(</span><span class="kt">int</span> <span class="n">v</span><span class="p">,</span> <span class="kt">int</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="n">val</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span> <span class="p">{}</span>
    <span class="n">iterator</span> <span class="n">begin</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">iterator</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">step</span><span class="p">);</span> <span class="p">}</span>
    <span class="n">iterator</span> <span class="n">end</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">iterator</span><span class="p">(</span><span class="n">val</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="p">);</span> <span class="p">}</span>
<span class="p">};</span>

<span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">Count</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">i</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5_cpp.md">5_cpp.md</a>
            </aside>
            
            <aside class="page_number">
              48/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6_conclusion.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Eldritch Abomination</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6_conclusion.md">6_conclusion.md</a>
            </aside>
            
            <aside class="page_number">
              49/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6_conclusion.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Disclaimer</h1></header>
            
            
            <section><p>This last trick is NOT for the faint of heart.
If you are squeamish or think that you may be unable to handle this monstrosity, please stop reading.</p>
<p>It abuses some rules in the C++ syntax that should probably never be abused</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6_conclusion.md">6_conclusion.md</a>
            </aside>
            
            <aside class="page_number">
              50/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6_conclusion.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Void Type Expressions</h1></header>
            
            
            <section><p>A void function is normally assumed to not return anything.
In fact, you can leave the return out of the end of a void function.</p>
<p>However, technically a return expression can contain any expression that evaluates to a value of a type that can be coerced into the return type of the function.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">void</span> <span class="n">f</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
<span class="kt">void</span> <span class="n">g</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="n">f</span><span class="p">();</span> <span class="p">}</span>
<span class="kt">void</span> <span class="n">h</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">*</span><span class="n">k</span><span class="p">)())</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">k</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">h</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6_conclusion.md">6_conclusion.md</a>
            </aside>
            
            <aside class="page_number">
              51/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6_conclusion.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Void Type Expression Details</h1></header>
            
            
            <section><p>Some common void-type expressions:</p>
<ul>
<li>Functions returning void</li>
<li>Throw statements (Yes, the statement is an expression, it just returns void)</li>
</ul>
<p>Other places a void-type expression can be used:</p>
<ul>
<li>As either result of a ternary expression</li>
<li>Returning from a templated function, that returns the template type, that gets passed a void as the template</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6_conclusion.md">6_conclusion.md</a>
            </aside>
            
            <aside class="page_number">
              52/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6_conclusion.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Conclusion</h1></header>
            
            
            <section><p>I actually can't produce a piece of code that encorporates MOST of these tricks, let alone ALL.
Such code should probably never exist.</p>
<p>Reminder: Most of these should only be used if there is literally no other way to do what you want to do.
They give you more control over your code, at the expense of readability and maintainability.</p>
<p>Always remember that it's always a good idea to "Code for the Maintainer":</p>
<blockquote>
<p>Always code as if the person who ends up maintaining your code is a violent psychopath who knows where you live.</p>
<blockquote>
<p><em>I usually maintain my own code, so the as-if is true</em></p>
</blockquote>
</blockquote></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6_conclusion.md">6_conclusion.md</a>
            </aside>
            
            <aside class="page_number">
              53/54
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6_conclusion.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>return 0;</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6_conclusion.md">6_conclusion.md</a>
            </aside>
            
            <aside class="page_number">
              54/54
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Evil C++ 2</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Prerequisites</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Warnings</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Harmless</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">String Concatenation</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Octal</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Void pointers</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Commenting out/testing values</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Tricky</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">sizeof</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">The comma operator</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Conditional Scope</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Bitfields</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Devious</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Array and pointer indexing</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">By extension</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">The ternary operator</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Abusing destructors</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Function Pointers</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Unions</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Const References</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Evil</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Trigraphs</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Digraphs</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">X-Macros</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">X-macros Example</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">X-Macros final result</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Supermacros</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">Unary + operator</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">Unary + on enums</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">Unary + to create const ref</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">Unary + to convert arrays to pointers</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33">Switch Statements</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">Switch Statements (Fallthrough)</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Switch Statements (Blocks)</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">Switch Interlacing</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">Switch Interlacing Example</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">Duff's Device</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">Loop classes</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">C++ Evil</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">C++11 Warning</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">Templates</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">Template turing-completeness</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">Templates on unions (C++11)</a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">Templates on bitfields</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">Lambdas (C++11)</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">Range-based For Loops (C++11)</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">Exploiting ranges</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
      <tr id="toc-row-49">
        <th><a href="#slide49">Eldritch Abomination</a></th>
        <td><a href="#slide49">49</a></td>
      </tr>
      
      
      <tr id="toc-row-50">
        <th><a href="#slide50">Disclaimer</a></th>
        <td><a href="#slide50">50</a></td>
      </tr>
      
      
      <tr id="toc-row-51">
        <th><a href="#slide51">Void Type Expressions</a></th>
        <td><a href="#slide51">51</a></td>
      </tr>
      
      
      <tr id="toc-row-52">
        <th><a href="#slide52">Void Type Expression Details</a></th>
        <td><a href="#slide52">52</a></td>
      </tr>
      
      
      <tr id="toc-row-53">
        <th><a href="#slide53">Conclusion</a></th>
        <td><a href="#slide53">53</a></td>
      </tr>
      
      
      <tr id="toc-row-54">
        <th><a href="#slide54">return 0;</a></th>
        <td><a href="#slide54">54</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>